{% extends "base.html" %}

{% block title %}{{ playlist.title }} - Servidor de Música{% endblock %}

{% block content %}
<div class="playlist-container">
    <div class="playlist-header">
        <h2>{{ playlist.title }}</h2>
        <div class="playlist-actions">
            <a href="{{ url_for('playlist') }}" class="btn secondary">Volver a Todas las Canciones</a>
        </div>
    </div>
    
    {% with messages = get_flashed_messages() %}
        {% if messages %}
            <div class="alert">
                {% for message in messages %}
                    <p>{{ message }}</p>
                {% endfor %}
            </div>
        {% endif %}
    {% endwith %}
    
    {% if files %}
        {% if current_file %}
        <div class="player">
            <h3>Reproduciendo: {{ current_file }}</h3>
            <audio controls autoplay>
                <source src="{{ url_for('static', filename='uploads/' + current_file) }}" type="audio/mpeg">
                Tu navegador no soporta el elemento de audio.
            </audio>
        </div>
        {% endif %}
        
        <ul class="song-list">
            {% for file in files %}
            <li class="song-item {% if current_file == file %}active{% endif %}">
                <span class="song-name">{{ file }}</span>
                <div class="song-actions">
                    <a href="{{ url_for('play_file', filename=file) }}" class="btn play">▶️ Reproducir</a>
                    <a href="{{ url_for('download_file', filename=file) }}" class="btn download">⬇️ Descargar</a>
                </div>
            </li>
            {% endfor %}
        </ul>
    {% else %}
        <div class="empty-list">
            <p>Esta playlist está vacía. ¡Añade algunas canciones!</p>
            <a href="{{ url_for('upload') }}" class="btn primary">Subir canciones</a>
        </div>
    {% endif %}
</div>
{% endblock %}